# MKing Friend Environment Configuration
# Copy this file to .env and update the values as needed

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
APP_NAME=MKing Friend
APP_VERSION=1.0.0
APP_URL=http://localhost:3000
API_URL=http://localhost:3001

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3001
HOST=0.0.0.0
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=mking_friend
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# OBJECT STORAGE (MinIO)
# =============================================================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
MINIO_BUCKET_NAME=mking-friend
MINIO_USE_SSL=false
MINIO_CONSOLE_PORT=9001

# =============================================================================
# SEARCH ENGINE (Typesense)
# =============================================================================
TYPESENSE_HOST=localhost
TYPESENSE_PORT=8108
TYPESENSE_PROTOCOL=http
TYPESENSE_API_KEY=typesense

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# Session Configuration
SESSION_SECRET=your-super-secret-session-key-change-this-in-production
SESSION_MAX_AGE=86400000

# Password Hashing
BCRYPT_ROUNDS=12

# =============================================================================
# OAUTH PROVIDERS
# =============================================================================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/auth/google/callback

# Facebook OAuth
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
FACEBOOK_CALLBACK_URL=http://localhost:3001/auth/facebook/callback

# Keycloak
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=mking-friend
KEYCLOAK_CLIENT_ID=mking-friend-client
KEYCLOAK_CLIENT_SECRET=your-keycloak-client-secret

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@mkingfriend.com

# Email Templates
EMAIL_VERIFICATION_URL=http://localhost:3000/verify-email
PASSWORD_RESET_URL=http://localhost:3000/reset-password

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp
UPLOAD_PATH=uploads

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# =============================================================================
# MONITORING & METRICS
# =============================================================================
# Prometheus
PROMETHEUS_PORT=9090
METRICS_ENABLED=true
METRICS_PATH=/metrics

# Grafana
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# Loki
LOKI_PORT=3100

# =============================================================================
# API GATEWAY (Nginx)
# =============================================================================
NGINX_PORT=80
NGINX_SSL_PORT=443

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Hot Reload
HOT_RELOAD=true
WATCH_FILES=true

# Debug
DEBUG=mking:*
DEBUG_COLORS=true

# Testing
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/mking_friend_test?schema=public
TEST_REDIS_URL=redis://:redis@localhost:6379/1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_SWAGGER=true
ENABLE_CORS=true
ENABLE_HELMET=true
ENABLE_COMPRESSION=true
ENABLE_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
# Sentry (Error Tracking)
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development

# Analytics
GOOGLE_ANALYTICS_ID=your-ga-id

# Push Notifications
FCM_SERVER_KEY=your-fcm-server-key
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apns-team-id

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WS_PORT=3002
WS_PATH=/socket.io
WS_CORS_ORIGIN=http://localhost:3000

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_TTL=3600
CACHE_MAX_ITEMS=1000
CACHE_CHECK_PERIOD=600

# =============================================================================
# SECURITY HEADERS
# =============================================================================
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true